# Finnish Health Data Hackathon

[Invinite Oy](https://www.invinite.fi/) participated to the [Finnish Health Data Hackathon](https://fhir.fi/hackathon/2026/finland) on January 2026. We explored how data-as-software methodology can be used for improving completeness and correctness of synthetic data. This project contains an ETL pipeline implemented with modern python based stack (`uv`, `polars`, `duckdb`, and `marimo`) that perfoms simple data validations. In addition, we demonstrate how non-obvious higher aggregation level properties of the data such as distributions can be tested and visualized from aggregated synthetic data.

## High level structure

- Synthetic [SYNDERAI](https://synderai.net/) data FHIR Bundle JSON files are read from `data/EPS`
- Nested JSON data is flattened and stored to duckdb tables. New table is created per each resource type
- Data layout follows the widely adopted medallion-pattern:
    - Bronze layer contains data with minimal changes
    - Silver layer contains a cleaned up version from the bronzer layer data where nested fields are flattened and validations are perfmormed for values
    - Gold layer contains polished "data products". In our application, these tables contain aggregated distributions from data, that can be visualized and tested to ensure that synthetic data follow forms realistic distributions
- A marimo notebook ties everything together. It allows users to explore data in bronze, silver and gold layers through table UI and visualisations.
    - Static export of the notebook is available as [Github Page](https://inviniteopen.github.io/invinite.github.io/). Clone the repository for running interactive notebooks

## Why this matters?

High quality synthetic data offers solid foundation for developing health related applications. Lack of realistic data is common pain point faced by product development teams.

In addition, testing the aggregated properties of synthetic data becomes important when testing following aspects of a software system:

- AI applications that summarize data: if the test data distribution is not representative enough, it is impossible to test insights generated by AI system.
- Perfomance: distribution of data can have significant effects to the performance of a health data system depending of various factors like what data storage is used, how data is partitioned and what are the typical access patterns to data. Without representative data, the real life perfomance characteristics can not be tested.

## Requirements

- Use `uv` for environment and dependencies.

## Quick start

Create duckdb database from JSON files with
```bash
uv run main.py
```

Open marimo-powered data exploration and visualization notebook
```
uv run --group notebook marimo edit src/marimo/explore_fhir_duckdb.py
```

Run tests
```
uv run pytest
```

## Code quality

Format:

```bash
uvx ruff format .
```

Lint:

```bash
uvx ruff check .
```

Type check:

```bash
uvx ty check .
```

## Further reading

See [docs](./docs) for further dicussion about [Data as Software](./docs/das.md).
